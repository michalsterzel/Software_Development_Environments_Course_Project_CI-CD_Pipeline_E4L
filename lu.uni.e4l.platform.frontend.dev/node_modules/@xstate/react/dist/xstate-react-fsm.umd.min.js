!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("@xstate/fsm"),require("use-subscription")):"function"==typeof define&&define.amd?define(["exports","react","@xstate/fsm","use-subscription"],t):t((e=e||self).XStateReactFSM={},e.React,e.fsm,e.useSubscription)}(this,(function(e,t,r,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var u=function(e){var t;return e.subscribe((function(e){t=e})).unsubscribe(),t};e.useMachine=function(e,n){var i,c,o=(i=function(){return r.interpret(r.createMachine(e.config,n||e._options)).start()},(c=t.useRef()).current||(c.current={v:i()}),c.current.v),s=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,u,i=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(e){u={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(u)throw u.error}}return c}(t.useState((function(){return u(o)})),2),f=s[0],a=s[1];return t.useEffect((function(){n&&(o._machine._options=n)})),t.useEffect((function(){return o.subscribe(a),function(){o.stop()}}),[]),[f,o.send,o]},e.useService=function(e){var r=t.useMemo((function(){var t=u(e);return{getCurrentValue:function(){return t},subscribe:function(r){return e.subscribe((function(e){!1!==e.changed&&(t=e,r())})).unsubscribe}}}),[e]);return[n.useSubscription(r),e.send,e]},Object.defineProperty(e,"__esModule",{value:!0})}));
